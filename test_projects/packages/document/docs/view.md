# 视觉与交互规范

## 修订记录

| 版本号 | 修订内容                    | 修订人  | 修订日期   |
| ------ | --------------------------- | ------- | ---------- |
| V0.1   | 形成初稿。                  | daisiyu | 2023-11-29 |
| V0.2   | 调整间距 Space 章节的配图。 | daisiyu | 2023-12-14 |

## 写在前面

此文档针对后台管理类系统中**常用**组件的视觉与交互，可能不包含所有使用场景。新产品诞生或新功能添加时，一般会产生设计文件与交互方式说明，设计文件应该与此文档保持一致（旧版设计文件出现不一致的情况以此规范内容为准）。

### 来源

走查过程中发现的常见问题。

### 对 UI/UX 设计人员

UI/UX 设计人员在制作设计文件时应严格依照此规范。

### 对前端开发人员

前端开发同事阅读此文档后，可以对视觉及交互设计有更好的了解。在日常的开发过程中，势必会有未经过设计的功能直接输入到前端同事，前端同事对页面进行调整时请严格依照以下内容，保证页面视觉与交互上的合理性和一致性。前端同事在开发过程中遇到**任何**没有在此文档中体现的原则或对原则有任何疑惑，**切勿自由发挥或抱有凑合就行的想法**，请**及时联系 UI/UX 设计人员**。

此文档将与产品一起成长。

## 页面元素的尺寸

Ant Design 几乎为每一个组件预设了尺寸，在组件的使用过程中，为了使不同的页面看起来协调统一，一般选择大小为 `default` 的样式。而在较小的区域（如弹窗内容区域）使用 `small`。

## 页面元素的间距 Space

间距 `Space` 有三种默认大小，分别为 `small`、`middle`、`large` ，对应的尺寸为 `8px`、`16px`、`24px`。为了保证页面元素在不同页面上呈现出相似的视觉效果，在常规的后台管理类页面中，我们仅使用预设的三种尺寸，非必要不增加其他自定义间距大小。在下面对间距的说明中，我们使用 `small`、`middle`、`large` 而不是具体像素值。

### 主要功能区域的间距

在一个页面中，展示方式有明显差异的区块与区块之间的间距统一设置为 `large`。以下为产品中经常出现的布局情况：

- 一个产品的首页有多个数据可视化区块，那么这些区块之间的横向、纵向间距都设置为 `large`；

![ ](/view/space-2.png)

- 一个用于表格展示的页面，表格上方有几个统计数据图表，那么这几个图表之间的横向间距设置为 `large`，图表区域与表格区域的纵向间距设置为 `large`；

![ ](/view/space-3.png)

- 一个用于表格展示的页面，表格左侧有竖排标签页或树状结构，那么这个竖排标签页或树状结构与右侧表格的横向间距设置为 `large`；

![ ](/view/space-4.png)

### 表格与表格操作栏的间距

表格与表格操作栏的间距设置为 `middle`，操作按钮之间的横向间距设置为 `middle`；

![ ](/view/space-5.png)

## 按钮的类型

Ant Design 的按钮类型分为 `primary`、`default`、`dashed`、`text`、`link`，状态属性分为 `danger`、`ghost`、`disabled`、`loading`，需要根据不同的业务选择不同的类型。

- 五种类型：

1. 主按钮：`primary`，用于主行动点，一个操作区域只能有一个主按钮；
2. 默认按钮：`default`，用于没有主次之分的一组行动点；
3. 虚线按钮：`dashed`，常用于添加操作；
4. 文本按钮：`text`，用于最次级的行动点；
5. 链接按钮：`link`，用于导航至某位置。

- 四种状态：

1. 危险：`danger`，删除/移动/修改权限等危险操作，一般需要二次确认。
2. 幽灵：`ghost`，用于背景色比较复杂的地方，常用在首页/产品页等展示场景。
3. 禁用：`disabled`，行动点不可用的时候，一般需要文案解释。
4. 加载中：`loading`，用于异步操作等待反馈的时候，也可以避免多次提交。

### 主按钮的选择

区域中**最重要的功能**按钮应该被设置为 `primary`，**一个操作区域中只能有一个主按钮**。

### 按钮的顺序

在多个操作按钮并列时（如表格上方操作区域或表格中的操作列）需要考虑按钮的顺序，根据功能的重要程度与安全程度排列。以下为产品中经常出现的情况：

#### 表格上方操作区域的顺序从左到右一般为：主按钮、查询条件、批量操作按钮、危险操作按钮

![ ](/view/button-order-1.png)

#### 表格中操作列的顺序从左到右一般为：一般按钮、危险操作按钮

![ ](/view/button-order-2.png)

### 过多的按钮

当模块功能按钮过多时，可以将使用频率较低、功能重要程度较低的按钮合并为一个“更多”或“更多操作”的 `Dropdown`，根据不同的使用场景选择不同的 `Dropdown` 样式。

![ ](/view/button-more.png)

## 表格查询区域的样式

表格查询区域一般为多个查询条件与一个查询按钮的排列。

### 较少的查询条件

所有查询条件可以与其他操作按钮分布在一行中，且支持适当的自适应，在页面宽度缩小的时候宽度还可以继续缩小，查询条件自适应的最小宽度为 160px。

![ ](/view/search-1.png)

为了保证页面整洁，在查询条件较少时，仅保留可输入部分，可输入部分一般有输入框、选择框、级联选择框、时间段选择器等。

![ ](/view/search-3.png)

### [再考虑一下]多而复杂的查询条件

查询条件勉强与其他操作按钮分布在同一行中，但已经无法支持适当的自适应。如：查询输入框本身宽度已经小于 160px，在页面宽度缩小的时候无法继续缩小。

![ ](/view/search-2.png)

在查询条件较多的情况下，仅保留查询条件按钮，点击按钮在下方展开查询条件，支持重置和收起。

![ ](/view/search-4.png)

筛选条件较多，说明该表单数据本身就很复杂。从使用的角度来说，我们应该分析用户想在海量数据中看到什么，为用户预设一些分析结果，而不是将大量数据交给用户自己筛选。

### 批量操作按钮的禁用与启用

批量操作按钮默认设为禁用状态，在有表格行被选中时才启用。

![ ](/view/button-multiselect.png)

## 表格列的宽度

表格列的宽度应该根据该列内容的可能长度来设定。在编写代码时就应该固定一些内容已知且长度较短的列的宽度，让一些内容可能较长的列宽度充满剩余空间。

- 建议固定宽度的列一般有：序号、名称、IP 地址、MAC 地址、类型、操作等。
- 建议使用充满的列一般有：描述、说明等。

表格内容超出宽度时，使用 `...` 省略，避免内容换行。

## 数据格式

规范数据表达可以帮助用户准确一致地理解数据。

### 表格数值的位置排列

在表格中，如金额、数值等数值分布排列时，通常采用**右对齐**方式，方便用户快捷读取数据，也方便用户进行纵向对比。

### 表格数值的计量单位

在表格中，计量单位默认放在表头，并默认右对齐。

![ ](/view/table-units.png)

### 日期时间的数据格式

日期时间分为绝对时间和相对时间。

- 绝对时间：针对时间精确度要求较高的用户，强调信息发布的精确时间点，有回顾过去内容并通过绝对时间用来检索信息的诉求；
- 相对时间：时间的精确度对用户来说并不十分重要，重要的是信息的即时性。在中后台中，相对时间一般用于消息、通知类功能，用户往往更关注于书面形式的时间单位，而不必去往前推算出发布的具体时间点。

#### 日期格式

| 格式       | 如何使用及何时使用                                                                        | 例子                    |
| ---------- | ----------------------------------------------------------------------------------------- | ----------------------- |
| 年、月、日 | 中国默认使用 `yyyy-mm-dd` 格式。                                                          | 2023-08-08              |
| 专用名词   | 含有月日的专用名词采用阿拉伯数字表示时，应采用间隔号`·`将月、日分开，并在数字前后加引号。 | “6·1”儿童节             |
| 日期范围   | 在日期或时间范围之间显示一个波浪号 （前后需要空格）。                                     | 2022-08-08 ~ 2023-08-08 |

#### 时间格式

| 格式         | 如何使用及何时使用              | 例子       |
| ------------ | ------------------------------- | ---------- |
| 二十四小时制 | 二十四小时时间格式 `HH:mm:ss`。 | 18:08:00   |
| 十二小时制   | 十二小时时间格式 `h:mm:ss`。    | 6:08:00 PM |

标准格式：日期与时间连在一起时，两者之间用 `空格` 隔开，如 `2022-08-08 06:08:00`。

#### 相对时间的格式

时间的精确度对于用户并不十分重要，重要的是信息的即时性。在中后台中，相对时间一般用于消息、通知类功能，用户往往更关注于书面形式的时间单位，而不必去往前推算出发布的具体时间点。

| 时间              | 展示形式                                                |
| ----------------- | ------------------------------------------------------- |
| 1 分钟以内的时间  | 刚刚                                                    |
| 1 小时以内的时间  | N 分钟前                                                |
| 24 小时以内的时间 | N 小时前                                                |
| 24 小时以外的时间 | 用 `mm-dd HH:mm` 的形式表示，如 `08-08 06:08`           |
| 超过一年的时间    | 用 `yyyy-mm-dd HH:mm` 的形式表示，如 `2022-08-08 06:08` |

## 图表的对数据量的适应

### 坐标轴对真实数据的适应

如柱状图、折线图等图表的坐标轴类型为 `catagory` 类目轴时，并非所有类目的总数都可以被确定：

- 类目的数量可以提前确定：如七天内的数据展示或固定类型的事件展示；
- 类目的数量无法提前确定：如设备类型与数量对应关系的柱状图，网络中设备类型的数量无法提前确认

![ ](/view/graph-axis-adapt-1.png)

当无法提前确定类目数量时，需要做好类目数量较多的准备，在真实数据量超出预设数量时对坐标轴添加滚动功能。

![ ](/view/graph-axis-adapt-2.png)

### 图注对真实数据的适应

与类目轴相同，并非所有图注的总数都可以被确定。

![ ](/view/graph-option-adapt-1.png)

当无法提前确定图注数量时，需要做好数量较多的准备，在真实数据量超出预设数量时对图注分页。

![ ](/view/graph-option-adapt-2.png)

## 合适的消息反馈

为了帮助用户了解应用当前要做什么，也给用户的下一步行为做参考，以及了解操作后所产生的结果，当用户和系统需要交互时，使用不同的模式来反馈信息或结果。当设计者使用反馈或者自定义一些反馈时，请注意：

- 为用户在各个阶段提供必要、积极、即时的反馈；
- 避免过度反馈，以免给用户带来不必要的打扰，能够及时看到效果的、简单的操作，可以省略反馈提示。

对于设计人员来说，为了让用户在不同事件下都能感知与操作场景和紧急程度匹配的结果反馈或消息提示，在设计时需要考虑用户试图完成的任务以及需要引起注意的方式，采用何种反馈方式。

反馈可以被简单分为：提示信息、过程反馈和结果反馈。

- 提示信息：任何一个产品，即使用户界面做的再好，也离不开用户引导和信息提示。提示信息是用来告诉用户需要知道什么、采取什么样行动的内容。
- 过程反馈：操作过程中尽可能将状态的反馈给用户，即时的响应会给用户增加信赖感。
- 结果反馈：操作过程中尽可能将状态的反馈给用户，即时的响应会给用户增加信赖感。

### 适时使用 Popover 和 Tooltip 提示信息

当目标元素有进一步的描述和相关操作时，可以收纳到气泡卡片 `Popover` 中，根据用户的操作行为进行展现。

文字提示 `Tooltip` 用于精确地描述被指向的对象，例如图标、图形、链接等，鼠标移入则显示提示，移出消失，不承载复杂文本和操作。

与 `Tooltip` 相比，`Popover` 可以承载更复杂的内容，比如链接或按钮。

### 适时进行进度反馈

在操作需要一段时间（一般为超过 2 秒）完成时系统应即时给予提醒，明确告知加载的状态或加载进度条，保持与用户的沟通。

当用户不必等待较长的时间时，可以使用组件的加载状态，比如按钮点击后未收到后台回传的信息时将按钮状态设为 `loading`。

当用户操作需要较长时间才能完成时，使用进度条 `Progress` 展示当前操作的进度和状态。加载时间较长时应提供取消操作。

### 适当的录入反馈

操作过程中可通过不同的校验规则和形式，让用户及时发现并纠正错误，包括但不限于：

- 用户输入的内容不符合字段或表单的要求。
- 用户跳过了必填字段。

反馈文字紧跟着要说明的区块，反馈内容一般是错误说明，不自动消失，需要用户进行相应的交互操作后才消失。

### 适时使用二次确认

当用户进行危险操作或批量操作时，需要进行二次确认，一般使用确认对话框 `Modal.confirm` 或气泡确认框 `Popconfirm`。

与全屏居中的 `Modal.confirm` 相比，`Popconfirm` 更轻量，因此：

- `Popconfirm` 更适合用于单条删除数据时的二次确认。
- `Modal.confirm` 更适合用于数据量较大的批量操作的二次确认。

### 何时使用 Modal 反馈结果

对话框反馈 `Modal` 通过一个操作引发的反馈浮层位于页面中心，反馈内容可通过确认或取消按钮进行关闭，用户在反馈层出现时不可进行任何的操作，用于重要的反馈。对于**比较重要的失败通知，建议改用对话框的形式进行通知，以避免用户遗漏信息**。

- 操作成功并留在原地（_不建议_）：在不跳转页面打断用户工作流程的前提下，告知用户**重要**的成功结果。
- 操作失败并留在原地：提醒用户完成当前工作流之外的重要操作。

需要注意的是，为了保证信息被成功传递到用户，且用户的反馈被正确接收，一般取消右上角的关闭按钮，取消点击蒙层关闭弹窗。

**除失败时避免显示不必要的提醒弹窗。** 弹窗是很强的反馈机制，只有在传递非常重要，且可操作的信息时才需要使用它。

### 何时使用 Message 反馈结果

顶部全局提示反馈 `Message` 通过一个操作引发的反馈浮层位于顶部居中显示并自动消失，是一种不打断用户操作的轻量级提示方式。

- 操作成功并留在原地：在不希望在用户执行操作时中断用户前提下显示一条简短的成功消息。
- 操作成功并跳转：在不希望在用户执行操作时中断用户前提下显示一条简短的成功消息。

### 何时使用 Notification 反馈结果

通知提醒 `Notification` 展示系统主动推送的重要的全局性通知信息，在系统右上角显示。

- 操作失败并留在原地：a. 向用户告知重要的问题或失败状态，希望用户立马做出决策；b. 反馈后台进程失败和告警结果。
- 后台操作失败：a. 向用户告知重要的问题或失败状态，希望用户立马做出决策；b. 反馈后台进程结果。

### 何时使用 Alert 反馈结果

警告提示 `Alert` 是一种非阻碍式的信息展示，它不打断用户的当前操作，一般停留至页面某个位置（优先顶部），非浮层的静态展现形式，始终展现，不会自动消失，用户可以点击关闭。_关闭按钮可以根据业务需要增加或隐藏。_

- 操作失败并留在原地：提醒用户系统中需要立即引起注意的错误信息。

## 页面的自适应

除为特定现场定制化开发的可视化大屏外，所有页面为响应式页面。市场常见的普通显示器分辨率比例多为 16:9 和 16:10，宽度分辨率范围为 1280px ~ 1920px，高度分辨率范围为 900px ~ 1200px。设计稿常规尺寸 1920px \* 1080px，综合考虑常用分辨率范围，页面需要支持的响应式范围为：

- 响应式宽度：0.66 倍到 1.25 倍
- 响应式高度：0.83 倍到 1.25 倍

_其中页面宽度主要限制主要内容区域宽度，页面高度主要限制弹窗高度。_

### 大屏的自适应建议

大屏一般为定制化开发，**无需对元素做过于灵活的自适应**，避免元素的拉伸，仅做区域性的调整：

- 从高度的维度来说：固定头部的高度和距离屏幕顶部的距离，固定底部的高度和距离屏幕底部的距离，侧边装饰和可视化区域的高度填充屏幕剩余区域的高度。
- 从宽度的维度来说：固定侧边装饰的宽度，固定左侧装饰到屏幕左侧的距离，固定右侧装饰到屏幕右侧的距离，可视化区域的宽度填充屏幕剩余区域的宽度。

![ ](/view/adaptation-visualization-1.png)

自适应时主要调整可视化区域的主视觉区域，将可视化区域中的数据展示放置在靠近屏幕周围的位置，下面为常见的几种布局方式及其自适应建议：

![ ](/view/adaptation-visualization-2.png)
![ ](/view/adaptation-visualization-3.png)
![ ](/view/adaptation-visualization-4.png)

### 表格的自适应建议

自适应时仅调整那些宽度为充满的列。

### 数据展示的自适应建议

柱状图、折线图等含有横纵坐标轴的图表宽度在缩小的过程中，可能会出现横坐标文字重叠的情况。在横坐标初始布局就比较紧凑的情况下，宽度缩小时建议使用带横向滚动功能的图进行展示。

![ ](/view/graph-axis-adapt-3.png)
